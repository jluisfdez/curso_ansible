Include y Roles

Es posible dividir un playbook en distinta partes para facilitar la edici√≥n y tratado.

Con includes podemos especificar otro ficheros que contienes playbooks o otra tareas

Ej:
# cat include.yml
- name: Primer play
  hosts: localhost
  connection: local
  tasks:
    - name: Instalar vim
      apt: name=vim state=latest
    - include: instalar_apache2.yml

- name: Segundo play
  ansible.builtin.import_playbook: segundo_play.yml

# cat instalar_apache2.yml
- name: Instalar apache2
  apt: name=apache2 state=latest
- name: Iniciar apache
  service: name=apache2 state=started
- name: Habilitar servicio
  service: name=apache2 enabled=true

# cat segundo_play.yml
- hosts: localhost
  connection: local
  tasks:
    - name: Instalar lftp
      apt: name=lftp state=latest


Roles
Estructura de fichros y directorios para separar los elemente, permite ser revisados facilmente  es posible descargar roles predefinidos desde ansible galaxy

Estructura:
roles/
  nombre/
    files/
    templates/
    tasks/main.yml
    handlers/main.yml
    vars/main.y
    defaults/main.ymrl
    neta/main.yml

roles:
  - rol1
  - rol2

Para pasar variables 
  roles:
  - { role: rol1, clave: valor }
